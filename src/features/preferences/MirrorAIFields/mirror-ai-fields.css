/* ═══════════════════════════════════════════════════════════════════
   ✨ MIRROR AI FIELDS FEATURE - Layout Styles
   /src/features/preferences/MirrorAIFields/mirror-ai-fields.css

   Feature-level CSS (ft-*) - Cards use Card.standard VR
   ═══════════════════════════════════════════════════════════════════ */

/* Container */
.ft-mirror-ai {
  display: flex;
  flex-direction: column;
  gap: var(--space-xl);
  max-width: 1200px;
}

/* ─────────────────────────────────────────────────────────────────────
   Avatar Row: Grid + Preview side by side
   ───────────────────────────────────────────────────────────────────── */

.ft-mirror-ai-avatar-row {
  display: flex;
  align-items: center;
  justify-content: space-evenly;
  width: 100%;
}

/* Radio container opacity when disabled */
.ft-enchant-radio-container {
  opacity: 0.35;
  transition: opacity 0.3s ease;
}

.ft-enchant-radio-container--active {
  opacity: 1;
}

.ft-mirror-ai-enchantment-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: var(--space-xs);
  padding-left: 28px; /* Aligns with radio text (20px radio + 8px gap) */
}

/* Star wrapper - centered with label underneath */
.ft-mirror-ai-star-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  align-self: center;
  margin-top: -8px;
}

.ft-mirror-ai-star-label {
  font-size: 9px;
  color: var(--text-tertiary);
  margin-top: -6px;
}

/* Smaller star for enchantment */
.ft-star-toggle--enchantment {
  width: 32px;
  height: 32px;
  transition: opacity 0.2s ease, transform 0.1s ease-out;
}

.ft-star-toggle--enchantment:hover {
  opacity: 0.6;
}

.ft-star-toggle--hop {
  transform: translateY(-3px);
}

/* ─────────────────────────────────────────────────────────────────────
   Enchantment Radio Buttons (Uiverse style)
   ───────────────────────────────────────────────────────────────────── */

.ft-enchant-radio-container {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.ft-enchant-radio-row {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.ft-enchant-radio-input {
  display: none;
}

.ft-enchant-radio {
  position: relative;
  width: 20px;
  height: 20px;
  padding: 4px;
  background: var(--bg-tertiary);
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition:
    background-color 0.3s ease-in-out,
    box-shadow 0.3s ease-in-out;
  box-shadow:
    inset -1px -1px 4px var(--bg-primary),
    inset 1px 1px 3px var(--border-normal);
}

.ft-enchant-circle {
  width: 100%;
  height: 100%;
  background: transparent;
  border-radius: 50%;
  transition: all 0.3s ease-in-out;
}

.ft-enchant-radio-input:checked + .ft-enchant-radio .ft-enchant-circle {
  background: var(--brand-primary);
  transform: scale(1.1);
  outline: 2px solid var(--bg-primary);
}

.ft-enchant-radio-text {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  cursor: pointer;
}

.ft-enchant-radio-input:checked ~ .ft-enchant-radio-text {
  color: var(--text-primary);
}

.ft-enchant-radio-desc {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-normal);
  color: var(--text-tertiary);
}

/* ─────────────────────────────────────────────────────────────────────
   Live Preview (right column)
   ───────────────────────────────────────────────────────────────────── */

.ft-mirror-ai-preview-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
}

.ft-mirror-ai-preview-label {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.ft-mirror-ai-preview {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-lg);
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-light);
}

.ft-mirror-ai-preview-avatar-container {
  position: relative;
  width: 120px;
  height: 120px;
}

.ft-mirror-ai-preview-avatar {
  width: 120px;
  height: 120px;
  border-radius: var(--radius-lg);
  position: relative;
  z-index: 2;
}

.ft-mirror-ai-preview-twinkle {
  position: absolute;
  top: 35%;
  left: 48%;
  transform: translate(-50%, -50%);
  width: 140px;
  height: 140px;
  pointer-events: none;
  z-index: 1;
}


/* ─────────────────────────────────────────────────────────────────────
   Sections
   ───────────────────────────────────────────────────────────────────── */

.ft-mirror-ai-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.ft-mirror-ai-section-header {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.ft-mirror-ai-section-title {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
}

.ft-mirror-ai-section-description {
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
}

/* ─────────────────────────────────────────────────────────────────────
   Toggle Row (label + toggle inline)
   ───────────────────────────────────────────────────────────────────── */

.ft-mirror-ai-toggle-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-lg);
}

/* ─────────────────────────────────────────────────────────────────────
   Avatar Selection Grid
   ───────────────────────────────────────────────────────────────────── */

.ft-mirror-ai-avatar-grid {
  display: grid;
  grid-template-columns: repeat(3, 80px);
  gap: var(--space-md);
}

.ft-mirror-ai-avatar-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  transition: all var(--duration-fast) var(--easing);
}

.ft-mirror-ai-avatar-image {
  width: 80px;
  height: 80px;
  aspect-ratio: 1;
  border-radius: var(--radius-md);
  transition: all var(--duration-fast) var(--easing);
}

/* Active: pressed/inset effect */
.ft-mirror-ai-avatar-option--active .ft-mirror-ai-avatar-image {
  box-shadow: inset 0 2px 8px rgb(0 0 0 / 25%);
}

.ft-mirror-ai-avatar-option:hover .ft-mirror-ai-avatar-image {
  opacity: 0.85;
}

/* Don't fade active avatar on hover */
.ft-mirror-ai-avatar-option--active:hover .ft-mirror-ai-avatar-image {
  opacity: 1;
}


/* ─────────────────────────────────────────────────────────────────────
   Star Toggle Button (Enchantment Toggle)
   From Uiverse.io by anishwij - adapted with ft-* namespace
   ───────────────────────────────────────────────────────────────────── */

.ft-star-toggle {
  --star-color: rgb(250 190 21);

  position: relative;
  width: 64px;
  height: 64px;
  transition: transform 0.3s ease;
  cursor: pointer;
}

.ft-star-toggle .ft-star-checkbox {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  z-index: 20;
  cursor: pointer;
}

.ft-star-toggle .ft-star-svg-container {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: visible;
  position: relative;
}

.ft-star-toggle .ft-star-svg-bg {
  fill: #fff;
  position: absolute;
  width: 100%;
  height: 100%;
}

.ft-star-toggle .ft-star-svg-outline {
  fill: var(--border-light);
  position: absolute;
  width: 100%;
  height: 100%;
  transition: all 0.3s ease;
}

.ft-star-toggle .ft-star-svg-filled {
  fill: var(--star-color);
  position: absolute;
  width: 100%;
  height: 100%;
  transition: all 0.3s ease;
  animation: ft-star-keyframes-filled 1s;
  opacity: 0;
  transform: scale(0);
}

.ft-star-toggle .ft-star-svg-celebrate {
  position: absolute;
  display: none;
  visibility: hidden;
  stroke: var(--star-color);
  fill: var(--star-color);
  stroke-width: 2px;
  pointer-events: none;
}

/* stylelint-disable selector-max-specificity -- checkbox+sibling combinator pattern requires high specificity */
.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-svg-outline {
  opacity: 0;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-svg-filled {
  opacity: 1;
  transform: scale(1);
}

.ft-star-toggle .ft-star-checkbox:not(:checked) ~ .ft-star-svg-container .ft-star-svg-filled {
  animation: ft-star-keyframes-unfilled 0.3s forwards;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-svg-celebrate {
  display: block;
  visibility: visible;
}

/* Base particle state - hidden by default */
.ft-star-toggle .ft-star-particle {
  opacity: 0;
  visibility: hidden;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle {
  opacity: 1;
  visibility: visible;
}

/* Only animate particles when checked */
.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(1) {
  animation: ft-star-particle-1 1s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(2) {
  animation: ft-star-particle-2 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(3) {
  animation: ft-star-particle-3 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(4) {
  animation: ft-star-particle-4 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(5) {
  animation: ft-star-particle-5 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(6) {
  animation: ft-star-particle-6 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(7) {
  animation: ft-star-particle-7 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(8) {
  animation: ft-star-particle-8 1s ease-out;
}
/* stylelint-enable selector-max-specificity */

@keyframes ft-star-keyframes-filled {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  25% {
    transform: scale(1.2);
    opacity: 1;
    fill: rgb(250 190 21 / 75%);
  }

  50% {
    transform: scale(1);
    fill: rgb(250 190 21 / 75%);
  }

  100% {
    fill: var(--star-color);
  }
}

@keyframes ft-star-keyframes-unfilled {
  0% {
    transform: scale(1);
    opacity: 1;
  }

  100% {
    transform: scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-1 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(-20px, -25px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(-40px, 40px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-2 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(20px, -25px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(40px, 40px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-3 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(-30px, -20px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(-50px, 45px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-4 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(30px, -20px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(50px, 45px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-5 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  45% {
    transform: translate(0, -30px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(0, 40px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-6 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  35% {
    transform: translate(-35px, -15px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(-60px, 50px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-7 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  35% {
    transform: translate(35px, -15px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(60px, 50px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-star-particle-8 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  45% {
    transform: translate(0, -35px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(0, 45px) scale(0);
    opacity: 0;
  }
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .ft-mirror-ai-avatar-row {
    flex-direction: column;
    gap: var(--space-xl);
  }

  .ft-mirror-ai-preview {
    order: -1; /* Move preview to top on mobile */
    width: 100%;
  }
}

@media (max-width: 480px) {
  .ft-mirror-ai-avatar-grid {
    grid-template-columns: repeat(3, 60px);
    gap: var(--space-xs);
  }

  .ft-mirror-ai-avatar-image {
    width: 60px;
    height: 60px;
  }

  .ft-mirror-ai-preview-avatar-container,
  .ft-mirror-ai-preview-avatar {
    width: 100px;
    height: 100px;
  }
}
